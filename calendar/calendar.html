<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="author" content="">

  <title>INST377 Calendar Example</title> 
  <script>
    document.addEventListener('DOMContentLoaded', loadData());
    function loadData() {
        fetch('https://data.princegeorgescountymd.gov/resource/sphi-rwax.json')
        .then(res => res.json())
        .then(res => {
          console.log(res);
          res.forEach(r => console.log(r.season1time, r.season1_date))
          return res;
        })
        .then(data => data.map(f => f.market_name + ", " + f.season1_date + ", " + f.season1time))
        .then(markets => {

          const results = document.querySelector('.results');
          results.innerHTML = "";

          markets.forEach(item => {
            let l = document.createElement("li");
            l.innerText = item;
            results.appendChild(l);
          });
          console.log(markets)
        })
      }
  </script>  
</head>

<body>
  <div class="container">
      <div class="wrapper">
        <div class="header">PG County Farmers Markets</div>
        <!-- <button class="button" onclick="loadData()">Load Some JSON</button> -->
        Saturday Markets: <input type="checkbox" id="myCheck" onclick="filterData()">
        <div class="content">
          <ul class="results"></ul>
        </div>
        <div class="footer"></div>
      </div>
    </div>
    <script>
      function filterData() {
        fetch("https://data.princegeorgescountymd.gov/resource/sphi-rwax.json?$where=starts_with(season1time, 'Sat')")
        .then(res => res.json())
        .then(data => data.map(f => f.market_name + ", " + f.season1_date + ", " + f.season1time))
        .then(markets => {

          const results = document.querySelector('.results');
          results.innerHTML = "";

          markets.forEach(item => {
          let l = document.createElement("li");
          l.innerText = item;
          results.appendChild(l);
        });
        console.log(markets)
        })
      }
    </script>
</body>